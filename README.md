# pythonStudy

Pythonã®å­¦ç¿’ç”¨

â€»ç‰¹ã«è¡¨è¨˜ã®ãªã„é™ã‚Šã¯Python3å‰æ

## è¨€èªä»•æ§˜ã€æ–‡æ³•é–¢é€£

* ç”¨èª
    * Python: è¨€èªä»•æ§˜
    * CPython: Pythonã§æœ€ã‚‚æ™®åŠã—ã¦ã„ã‚‹å®Ÿè£…ï¼ˆCè¨€èªã§å®Ÿè£…ï¼‰
        * [wikipedia](https://ja.wikipedia.org/wiki/Python)è¦‹ã‚‹ã¨ã€ä»–ã«ã‚‚Pythonå®Ÿè£…ã¯è¤‡æ•°ã‚ã‚‹æ¨¡æ§˜
    * IPython: Pythonã®éå¸¸ã«å¼·åŠ›ãªå¯¾è©±å‹ã‚·ã‚§ãƒ«

* é–¢æ•°å®šç¾©
    * https://note.nkmk.me/python-function-def-return/
    * ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®setter/getterã¯ã‚ã‚“ã©ãã•ã„ï¼ˆC#æ¯”ï¼‰

* å‹ãƒ’ãƒ³ãƒˆ
    * https://qiita.com/icoxfog417/items/c17eb042f4735b7924a3
    * https://docs.python.org/ja/3/library/typing.html

* å†…åŒ…è¡¨è¨˜
    * map(), filter()ç­‰ã§æ›¸ãã“ã¨ã‚‚å¯èƒ½ã ãŒã€é€Ÿåº¦é¢ã§ã¯å†…åŒ…è¡¨è¨˜ãŒå„ªã‚Œã¦ã„ã‚‹ã‚‰ã—ã„

* ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ/ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
    * å¯¾å¿œã—ã¦ã„ãªã„
    * https://www.deep-rain.com/programming/python/1772

* æ–‡å­—åˆ—
    * ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹ã‚’æ›¸ãéš›ã¯ã€rawæ–‡å­—åˆ—ã§æ›¸ãã®ãŒã¨ã‚Šã‚ãˆãšã¯æ¥½ã‹
        * è¨˜è¼‰ä¾‹  
        `foo = r"c:\temp"`
        * ãŸã ã—rawæ–‡å­—åˆ—ã¯æœ«å°¾ãŒã€Œ\ã€ã ã¨ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹  
        ï¼ˆC#ã® `@"hoge"` ã¨ã¯ä»•æ§˜ãŒç•°ãªã‚‹ã®ã§æ³¨æ„ã€‚ã“ã®è¾ºPythonã¯Windowsã§ã¯ã„ã¾ã„ã¡æ„Ÿã‚ã‚‹ï¼‰  
        ![](img/README/20220911-09152040.png)

* é…åˆ—ã¨ãƒªã‚¹ãƒˆã®é•ã„
    * é…åˆ—ã¯å›ºå®šé•·ã§å®šç¾©æ™‚ã®å‹ã®ã¿
    * ãƒªã‚¹ãƒˆã¯å‹•çš„é…åˆ—ã§å‹ã¯ãªã‚“ã§ã‚‚è‰¯ã„
        * C#ã®System.Collections.Generic.List<System.Object>å‹ãŒè¿‘ã„ã‹ã‚‚
    * ä¸¡è€…ã¯ãƒ¡ãƒ¢ãƒªç¢ºä¿ã®ä»•æ–¹ãŒé•ã†

* å¤‰æ•°ä»£å…¥ã®æŒ™å‹•
    * https://www.learning-nao.com/?p=2384
        * =ã§ã®ä»£å…¥ã¯å‚ç…§æ¸¡ã—
        * df.copy()ã§ãƒ‡ã‚£ãƒ¼ãƒ—ã‚³ãƒ”ãƒ¼

* ãƒ¡ãƒ¢ãƒªã€ãƒ’ãƒ¼ãƒ—ã€ã‚¹ã‚¿ãƒƒã‚¯å‘¨ã‚Šé–¢é€£
    * æ•´æ•°ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‰ã—ã„ãƒ»ãƒ»ãƒ»
        * ã¨ã„ã†ã‹ã™ã¹ã¦ã®å‹ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    * ï¼ˆãŠãã‚‰ãCpythonã«ã¤ã„ã¦ã¯ï¼‰å€¤ã®è¡¨ç¾ã¯Cã®å®Ÿè£…ä¾å­˜ã‚‰ã—ã„  
    https://docs.python.org/ja/3/library/array.html  
        > å€¤ã®å®Ÿéš›ã®è¡¨ç¾ã¯ãƒã‚·ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ (å³å¯†ã«è¨€ã†ã¨Cã®å®Ÿè£…) ã«ã‚ˆã£ã¦æ±ºã¾ã‚Šã¾ã™ã€‚å€¤ã®å®Ÿéš›ã®ã‚µã‚¤ã‚ºã¯ itemsize å±æ€§ã‹ã‚‰å¾—ã‚‰ã‚Œã¾ã™ã€‚
    * å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ  
    https://docs.python.org/ja/3/c-api/memory.html
    * ã“ã‚Œè©³ã—ã„
        * https://rushter.com/blog/python-garbage-collector/
        * CPythonã¯å‚ç…§ã‚«ã‚¦ãƒ³ã‚¿æ–¹å¼ã§ä¸–ä»£åˆ¥GCã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã‚ˆã†ã ã€‚æ•´æ•°ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆäº‘ã€…ã‚‚æ›¸ã‹ã‚Œã¦ã‚‹  
    * [wikipedia](https://ja.wikipedia.org/wiki/Python)ã«çµæ§‹æ›¸ã‹ã‚Œã¦ã„ã‚‹

* pythonã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒªãƒã‚¸ãƒˆãƒª
    * ã©ã“ã«ã‚ã‚‹ã®ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„ãŒã€ã“ã“ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯ã§ãã‚‹  
        https://www.python.org/downloads/source/
    * ã¨ã‚Šã‚ãˆãšä¸­èº«è¦‹ã‚‹ã¨Cè¨€èª

* docstring ï¼ˆC#ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆçš„ãªæ©Ÿèƒ½ / \<summary\>...\</summary\>çš„ãªã®ï¼‰
    * https://maku77.github.io/python/env/docstring.html
    * https://note.nkmk.me/python-docstring/

* ä¾‹å¤–
    * ä¾‹å¤–ãŒç™ºç”Ÿã—ãªã„å ´åˆã¯ã€ä¾‹å¤–å‡¦ç†æ›¸ãã“ã¨ã®ã‚³ã‚¹ãƒˆã¯ãã‚“ãªã«æ°—ã«ã—ãªãã¦ã‚ˆã„ã£ã½ã„
        * https://ja.stackoverflow.com/questions/39712/python%E3%81%AE%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%81%AF%E9%81%85%E3%81%8F%E3%81%AA%E3%81%84


## æ©Ÿæ¢°å­¦ç¿’é–¢é€£

ä¸€èˆ¬çš„ãªæµã‚Œï¼ˆã‚³ãƒ³ãƒšæƒ³å®šï¼‰

* ãƒ‡ãƒ¼ã‚¿ã®å†…å®¹ã‚’ç¢ºèª
    * å„é …ç›®ã®æ„å‘³
    * æ¬ æå€¤ã®æœ‰ç„¡
    * é€£ç¶šãƒ‡ãƒ¼ã‚¿ã€ã‚«ãƒ†ã‚´ãƒªå€¤ãªã©
    * ...ãªã©
* EDA
    * ãƒ‡ãƒ¼ã‚¿ã‚’è§£æå¯èƒ½ãªçŠ¶æ…‹ã«å¤‰æ›ã™ã‚‹
        * pandasã‚„seabornç”¨ã«æ–‡å­—åˆ—ã®ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿ã‚’æ•°å€¤ã«å¤‰æ›ã™ã‚‹ãªã©ã‚‚å¿…è¦
    * æ§˜ã€…ãªåˆ‡ã‚Šå£ã§ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚‹
        * ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿
            * ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãªã©
        * é€£ç¶šãƒ‡ãƒ¼ã‚¿ã€é›¢æ•£ãƒ‡ãƒ¼ã‚¿
            * æ•£å¸ƒå›³ãªã©
    * ç‰¹å¾´ã‚’æ–°è¦ã«ä½œã£ã¦ç›®çš„å¤‰æ•°ã¨ã®ç›¸é–¢ã‚’è¦‹ã‚‹
    * ...ãªã©
* å­¦ç¿’
    * ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´
        * GridSearchCV
        * Outuna
    * æ±åŒ–æ€§èƒ½ç¢ºèª
        * kåˆ†å‰²äº¤å·®æ¤œè¨¼
        * å±¤åŒ–kåˆ†å‰²äº¤å·®æ¤œè¨¼
    * ...ãªã©
* Submit
    * submitç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã£ã¦æŠ•ç¨¿


### å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã€æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ

```python
# å¤‰æ•°dataã¯ pandas.core.frame.DataFrame å‹ã¨ã™ã‚‹

# èª¬æ˜å¤‰æ•°ã€ç›®çš„å¤‰æ•°ã«åˆ†å‰²ã™ã‚‹ä¾‹
x_explanatory = data.drop("target_col")
y_target = data["target_col"]

# èª¬æ˜å¤‰æ•°ã€ç›®çš„å¤‰æ•°ã«åˆ†å‰²ã™ã‚‹ä¾‹ï¼šColumnsã‚’Listã§ä¸€æ—¦æ‘‚ã£ã¦ãã¦ã€ListsæŒ‡å®šã§åˆ†å‰²ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
cols = data.columns.tolist()
cols.remove("target_col")
x_explanatory = data[cols]
y_target = data['target_col']

# å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã€æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ
# stratifyï¼šå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ãƒ»æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ãã‚Œãã‚Œã®æ­£è§£ãƒ©ãƒ™ãƒ«ã®å‰²åˆã‚’æƒãˆã‚‹ï¼ˆãƒ‡ãƒ¼ã‚¿ã®åã‚Šã‚’å›é¿ã™ã‚‹ï¼‰
# random_stateï¼šintå‹ã‚’æŒ‡å®šã™ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿åˆ†å‰²ã®å†ç¾æ€§ã‚’ç¢ºä¿ã™ã‚‹ï¼ˆå†ç¾æ€§ä¸è¦ãªå ´åˆã¯æŒ‡å®šã—ãªãã¦ã‚‚ã‚ˆã„ï¼‰
# test_sizeï¼šåˆ†å‰²ã®å‰²åˆã‚’å¤‰æ›´å¯èƒ½ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯75%-25%ï¼‰
x_train, x_test, y_train, y_test = train_test_split(x_explanatory, y_target, stratify = y_target, random_state = 42)
```

### å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ï¼šãƒ¢ãƒ‡ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

ã¾ãšã¯ãƒ‡ãƒ•ã‚©è¨­å®šã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®baseãƒ¢ãƒ‡ãƒ«ã§å­¦ç¿’ã•ã›ã¦ã¿ã¦ã€ãŠãŠã‚ˆãã®ç²¾åº¦ã‚’æŠŠæ¡ã™ã‚‹ã€‚ï¼ˆå®Ÿå‹™ã§ã¯ã‚ˆãã‚„ã‚‹ã“ã¨ã‚‰ã—ã„ï¼‰

* Scikit-learn RandomForest
    * ã‚¯ãƒ©ã‚¹åˆ†é¡: RandomForestClassifier()
    * å›å¸°åˆ†æ: RandomForestRegressor()
* XGBoost
    * ã‚¯ãƒ©ã‚¹åˆ†é¡: XGBClassifier()
    * å›å¸°åˆ†æ: XGBRegressor()

### æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ï¼šãƒ¢ãƒ‡ãƒ«ã®äºˆæ¸¬ç²¾åº¦ã‚’æ¸¬å®š

predict()ã§æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦äºˆæ¸¬ã®ç²¾åº¦ã‚’æ¸¬å®šã™ã‚‹ã€‚
ã“ã®ã¨ãã€äºˆæ¸¬ã§ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿ã¯ä½¿ç”¨ã—ãªã„ã€‚

score()ã€accuracy_score()ç­‰ã§ç²¾åº¦ã‚’å–å¾—å¯èƒ½ã€‚

CVã¯ã¡ã‚ƒã‚“ã¨ã‚„ã£ãŸã»ã†ãŒã‚ˆã„ã€‚ï¼ˆpublicã«æœ€é©åŒ–ã•ã‚Œã™ãã¦privateã§ä¸é©åˆã«ãªã‚‹å¯èƒ½æ€§ã‚ã‚Šï¼‰  
é€†ã«ã„ã†ã¨publicã®ã‚¹ã‚³ã‚¢ã‚ˆã‚ŠCVã‚’ä¿¡ã˜ãŸæ–¹ãŒã‚ˆã„ã€‚

* åˆ†é¡
    * äºŒå€¤åˆ†é¡å•é¡Œã¯è©•ä¾¡æŒ‡æ¨™ã«ã‹ã‹ã‚ã‚‰ãšloglossã‹aucã‚’ä½¿ã†ã®ãŒå®‰å®šã™ã‚‹
        * Kaggleã§å‹ã¤ãƒ‡ãƒ¼ã‚¿åˆ†æã®æŠ€è¡“
    * Accuracy
    * få€¤
        * åˆ†é¡å•é¡Œã§ã¯ã“ã‚Œã‚’è¦‹ã‚‹ã“ã¨ãŒå¤šã„
    * æ··åŒè¡Œåˆ—
    * ROCæ›²ç·š
        * åˆ†é¡ãƒ¢ãƒ‡ãƒ«ã®é–¾å€¤ã‚’ãšã‚‰ã—ãŸã¨ãã®çµæœã‚’è¦‹ã‚‹ã‚‚ã®
            * FPR(False Positive Rate)
            * TPR(True Positive Rate)
            * è‰¯ã„ãƒ¢ãƒ‡ãƒ«ã¯FPRãŒä½ã„æ™‚ç‚¹ã§TPRãŒé«˜ã„ã‚‰ã—ã„
        * scikit-learn.roc_curve()
        * ã“ã®ã‚µã‚¤ãƒˆãŒã‚ã‹ã‚Šã‚„ã™ã„
            * https://blog.kikagaku.co.jp/roc-auc
    * AUC
        * ROCæ›²ç·šã®ä¸‹å´ã®é¢ç©
        * ç†æƒ³çš„ãªãƒ¢ãƒ‡ãƒ«ã¯1ã«ãªã‚Šã€å®Œå…¨ã«ãƒ©ãƒ³ãƒ€ãƒ ã«äºˆæ¸¬ã ã¨0.5ã€æ­£è§£ã¨çœŸé€†ã®äºˆæ¸¬ã ã¨0
        * scikit-learn.roc_auc_score()
    * classification_report()ã§ä¸€æ‹¬ã§å„ç¨®æŒ‡æ¨™ã‚’è¦‹ã‚Œã‚‹
        * é©åˆç‡(precision)ã€å†ç¾ç‡(recall)ã€F1ã‚¹ã‚³ã‚¢ã€æ­£è§£ç‡(accuracy)ã€ãƒã‚¯ãƒ­å¹³å‡ã€ãƒã‚¤ã‚¯ãƒ­å¹³å‡
        * macro avgã€få€¤ã¯å®Ÿå‹™ã§ã¯çµæ§‹è¦‹ã‚‹
        * weighted avgã¯ã‚ã¾ã‚Šè¦‹ãªã„
    * confusion_matrix
        * scikit-learnã®çµæœã¯ä¸€èˆ¬çš„ãªæ··åŒè¡Œåˆ—ã¨å‡ºæ–¹ãŒé•ã†ã‚‰ã—ã„ï¼ˆãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ»ãƒã‚¬ãƒ†ã‚£ãƒ–ã®ä½ç½®ãŒé•ã†ï¼‰  
        å‚è€ƒ: Qiita ã€å…¥é–€è€…å‘ã‘ã€‘æ©Ÿæ¢°å­¦ç¿’ã®åˆ†é¡å•é¡Œè©•ä¾¡æŒ‡æ¨™è§£èª¬(æ­£è§£ç‡ãƒ»é©åˆç‡ãƒ»å†ç¾ç‡ãªã©) https://qiita.com/FukuharaYohei/items/be89a99c53586fa4e2e4  
        ![](img/README/20220920-20202513.png)
    
* ç·šå½¢å›å¸°ãƒ¢ãƒ‡ãƒ«
    * MSE
    * RMSE
    * MAE
    * MAPE
    * R2

### å­¦ç¿’ã—ãŸãƒ¢ãƒ‡ãƒ«ã®å¯è¦–åŒ–

* scikit-learn feature_importances_ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    * æ±ºå®šæœ¨ç³»ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’é¸æŠã—ãŸã¨ãã€ç‰¹å¾´é‡ï¼ˆèª¬æ˜å¤‰æ•°ï¼‰ã®é‡è¦åº¦ã‚’ç®—å‡º
* XGB feature_importances_ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    * scikit-learnåŒæ§˜ï¼ŸãŸã¶ã‚“
* XGB plot_importance()
    * ã‚°ãƒ©ãƒ•è¡¨ç¤ºã¾ã§ã¾ã¨ã‚ã¦ã‚„ã£ã¦ãã‚Œã‚‹
    * importance_typeå¼•æ•°ã§é‡è¦åº¦ç®—å‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å¤‰æ›´å¯èƒ½ weight or gain or cover
        * gainã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯feature_importances_ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åŒæ§˜ã«ãªã‚‹
    * å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹: https://xgboost.readthedocs.io/en/stable/python/python_api.html
        * > â€weightâ€ is the number of times a feature appears in a tree  
        * > â€gainâ€ is the average gain of splits which use the feature  
        * >â€coverâ€ is the average coverage of splits which use the feature where coverage is defined as the number of samples affected by the split

* å‚è€ƒ: å­¦ç¿’æ›²ç·šã€é©åˆç‡-å†ç¾ç‡ã€ROCæ›²ç·šãªã©ã®ã‚°ãƒ©ãƒ•ã‚’ä¸€æ‹¬ã§å‡ºã™
    * https://clover.fcg.world/2016/03/28/2939/

### ãƒ‡ãƒ¼ã‚¿ã®äº‹å‰æ•´å½¢

* ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°
    * ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®çµ±ä¸€ï¼ˆå…¨è§’ã€åŠè§’ã¨ã‹ï¼‰
    * ä¸è¦ãªåˆ—ã®å‰Šé™¤ï¼ˆIDãªã©ï¼‰
    * å®šç¾©å¤–ãªå€¤ã®è¦‹ç›´ã—
    * æ¬ æå€¤ã®è£œå®Œ
        * https://qiita.com/FukuharaYohei/items/9830d5760595619352a5
        * æ¬ æå€¤ã®è£œå®Œã¯è‰¯ã—æ‚ªã—ï¼ˆã‚„ã‚‰ãªã„ã¨ã„ã†é¸æŠè‚¢ã‚‚ã‚ã‚‹ï¼‰
* ãƒ‡ãƒ¼ã‚¿çµ±åˆï¼ˆè¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã„ã‚„ã™ãçµ±åˆã—ãŸã‚Šã™ã‚‹ï¼‰
* ãƒ‡ãƒ¼ã‚¿å¤‰æ›ï¼ˆæ–‡å­—åˆ—ã‚’æ•°å€¤ã«å¤‰æ›ã—ãŸã‚Šã™ã‚‹ï¼‰
* ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ï¼ˆèª¬æ˜å¤‰æ•°ã‚’åŠ å·¥ã—ã¦æ–°ã—ã„èª¬æ˜å¤‰æ•°ã‚’ä½œã£ãŸã‚Šãªã©ï¼‰
    * ä¸€èˆ¬çš„ã«ã€èª¬æ˜å¤‰æ•°ã‚’å¢—ã‚„ã™ã¨ç²¾åº¦å‘ä¸Šã—ã‚„ã™ããªã‚‹ï¼†éå­¦ç¿’ã—ã‚„ã™ããªã‚‹
    * ãƒ‡ãƒ¼ã‚¿ã®åã‚Šã¯æ­£è¦åˆ†å¸ƒã®å½¢ãŒç†æƒ³
        * https://uribo.github.io/practical-ds/02/numeric.html  
            > å…·ä½“çš„ã«ã¯ç·šå½¢å›å¸°ãƒ¢ãƒ‡ãƒ«ã§ã¯ã€å‡ºåŠ›ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹å€¤ã®èª¤å·®ãŒæ­£è¦åˆ†å¸ƒã«å¾“ã†ã“ã¨ã‚’ä»®å®šã—ã¾ã™ã€‚ãã®ãŸã‚æ­£è¦åˆ†å¸ƒã¨ã¯ç•°ãªã‚‹å½¢çŠ¶ã®åˆ†å¸ƒã‚’ã‚‚ã¤ãƒ‡ãƒ¼ã‚¿ã€ä¾‹ãˆã°é›¢æ•£å€¤ã§ã¯ãã®ä»®å®šãŒæˆç«‹ã—ãªã„ã“ã¨ãŒå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’æ­£è¦åˆ†å¸ƒã«è¿‘ä¼¼ã•ã›ã‚‹ã¨ã„ã†ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚  
            > è‰¯ã„ç‰¹å¾´é‡ã¨ã„ã†ã®ã¯ãƒ‡ãƒ¼ã‚¿ã®ç‰¹å¾´ã‚’å¼·ãåæ˜ ã—ã¾ã™ã€‚é€£ç¶šçš„ãªæ•°å€¤ã®äºŒå€¤åŒ–ã‚ã‚‹ã„ã¯é›¢æ•£åŒ–ã«ã‚ˆã‚Šã€ãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦ã‚’æ”¹å–„ã§ãã‚‹è¦‹è¾¼ã¿ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸæ•°å€¤ä»¥å¤–ã®ãƒ†ã‚­ã‚¹ãƒˆã‚„ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’æ•°å€¤åŒ–ã—ãŸéš›ã€ã•ã‚‰ãªã‚‹ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãŒå¿…è¦ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šæ•°å€¤ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã¯ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®ä¸­ã§æœ€ã‚‚åŸºæœ¬çš„ãªæŠ€ã¨è¨€ãˆã¾ã™ã€‚  
            > ï½ç•¥ï½  
            > ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã§ã¯å¤‰æ•°ã®ã°ã‚‰ã¤ãã‚’å…ƒã«ã™ã‚‹å¤‰æ›ã®ãŸã‚ã«å¤‰æ›å¾Œã®å€¤ã§ã‚‚åˆ†å¸ƒã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—å¯¾æ•°å¤‰æ›ã§ã¯ãƒ‡ãƒ¼ã‚¿ã®åˆ†å¸ƒãŒå¤‰åŒ–ã—ã¾ã™ã€‚
    * å¯¾æ•°åŒ–ã®æ‰‹æ³•
        * https://omathin.com/100knock-61-62/
            * 0ã¯æ‰±ãˆãªã„ã®ã§ä¸€èˆ¬çš„ã«ã¯1ã‚’è¿½åŠ ã—ã¦ã‹ã‚‰å¯¾æ•°åŒ–ã™ã‚‹
                * å¸¸ç”¨å¯¾æ•°åŒ–: numpy.log10()
                    * ex: `df_sales_amount['amount_log10'] = np.log10(df_sales_amount['amount']+1)`
                * è‡ªç„¶å¯¾æ•°åŒ–: numpy.log()
                    * ex: `df_sales_amount['amount_loge'] = np.log(df_sales_amount['amount']+1)`
            * å¯¾æ•°ã¸ã®å¤‰æ›ã§ã¯ã€åŸºæœ¬çš„ã«è‡ªç„¶å¯¾æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã‚‰ã—ã„
    * ç›¸é–¢ãŒé«˜ã™ãã‚‹èª¬æ˜å¤‰æ•°ã‚’æ¸›ã‚‰ã—ã¦ã¿ã‚‹
    * ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿ã®èª¿æ•´
        * ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿ã¨ã¯
            * https://atmarkit.itmedia.co.jp/ait/articles/2208/31/news039.html
                * > ä¸€èˆ¬åŒ–ã•ã‚ŒãŸæ˜ç¢ºãªåŸºæº–ã¯ãªã„ãŒã€äºŒå€¤åˆ†é¡ã§ã‚ã‚Œã°å°‘æ•°æ´¾ã‚¯ãƒ©ã‚¹ãŒä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿè¦š
                    > * 1ï¼…æœªæº€ï¼é‡åº¦ã®ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿
                    > * 1ï¼…ä»¥ä¸Šï½20ï¼…æœªæº€ï¼ä¸­åº¦ã®ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿
                    > * 21ï¼…ä»¥ä¸Šï½40ï¼…æœªæº€ï¼è»½åº¦ã®ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿
                * ç”¨èª
                    > * ã‚¢ãƒ³ãƒ€ãƒ¼ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆUndersamplingï¼‰ï¼š å¤šæ•°æ´¾ã‚¯ãƒ©ã‚¹ã‚’å°‘æ•°æ´¾ã‚¯ãƒ©ã‚¹ã®æ•°ã¨åŒã˜ãã‚‰ã„ã¾ã§ï¼ˆã‚‚ã—ãã¯ä¸å‡è¡¡ãŒå¼±ã¾ã‚‹ã¾ã§ï¼‰æ¸›ã‚‰ã™ã“ã¨ã€‚ãƒ€ã‚¦ãƒ³ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆDownsamplingï¼‰ã¨ã‚‚å‘¼ã¶
                    > * ã‚ªãƒ¼ãƒãƒ¼ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆOversamplingï¼‰ï¼š å°‘æ•°æ´¾ã‚¯ãƒ©ã‚¹ã‚’å¤šæ•°æ´¾ã‚¯ãƒ©ã‚¹ã®æ•°ã¨åŒã˜ãã‚‰ã„ã¾ã§ï¼ˆã‚‚ã—ãã¯ä¸å‡è¡¡ãŒå¼±ã¾ã‚‹ã¾ã§ï¼‰å¢—ã‚„ã™ã“ã¨ã€‚ã‚¢ãƒƒãƒ—ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆUpsamplingï¼‰ã¨ã‚‚å‘¼ã¶
        * ã‚¢ãƒƒãƒ—ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° / ã‚ªãƒ¼ãƒãƒ¼ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°
            * https://qiita.com/eigs/items/9ed36b5fc2913110e940
            * https://qiita.com/eigs/items/8ae0970afe188a1124d1
            * https://qiita.com/tempester08/items/d84ce8d423919a0e5239
                * SMOTEã‚„ã‚‹å‰ã«ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯åˆ†é›¢ã—ã¦ãŠãã‚ˆã†ã«ã¨ã„ã†è©±
                    * ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚„ã‚‹ã¨ãã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä¸¡æ–¹ã«ã‚„ã‚‰ãªã„ã¨ã‚«ãƒ©ãƒ æ§‹æˆãŒå¤‰ã‚ã‚‹ã¨æ€ã†ã‚“ã ã‘ã©ã€ãªã«ã‹æ¥½ãªã‚„ã‚Šæ–¹ã‚ã‚‹ã®ã‹ãªãƒ»ãƒ»ãƒ»
        * ãƒ€ã‚¦ãƒ³ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°
        * æå¤±é–¢æ•°ã®èª¿æ•´
            * class_weight
                * https://www.haya-programming.com/entry/2018/05/17/123000
* ...ãªã©

### EDA

* ã¾ãšã‚„ã‚‹ã¹ãã“ã¨
    * https://qiita.com/takubb/items/e18ea4f7c4ecc8be4a5f
    * trainã¨testã®ãƒ‡ãƒ¼ã‚¿ã¯ç¸¦ã«é€£çµã—ãŸä¸Šã§EDAã—ãŸæ–¹ãŒã‚ˆã„ã‹ã‚‚
        * trainã ã‘è¦‹ã¦ã„ã¦ã‚‚çµå±€testã®æ–¹ã‚‚æ°—ã«ãªã£ã¦ã—ã¾ã£ã¦ä½œæ¥­ã®ç„¡é§„æ„Ÿã‚ã‚‹
* https://qiita.com/ryo111/items/bf24c8cf508ad90cfe2e
* Titanic
    * æ€ã£ã¦ãªã‹ã£ãŸè¦³ç‚¹ã§è¦‹ã¦ã‚‹äººãŒã„ãŸã‚Šã™ã‚‹
        * https://qiita.com/jun40vn/items/d8a1f71fae680589e05c
    * åˆå¿ƒè€…ãŒKaggle Titanicã§ä¸Šä½1.5%(0.83732)ä»¥å†…ã«å…¥ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒè§£èª¬
        * https://qiita.com/shiroino11111/items/bc3889fa38ff32d46c13
        * https://qiita.com/shiroino11111/items/fb6aa6b7dba2ddc3ce04
        * https://qiita.com/shiroino11111/items/21bf1303587eeae0fc30

#### pandas DataFrame

* æ¬ æå€¤ç¢ºèª
    * `df.isnull().sum()`
* è¦ç´„çµ±è¨ˆé‡
    * `df.describe()`
    * `Kaggleã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ç¬¬6ç‰ˆ`ã ã¨ã€trainã¨test(â†ç›®çš„å¤‰æ•°ãŒå…¥ã£ã¦ãªã„)ã‚’ç¸¦ã«é€£çµã—ãŸçŠ¶æ…‹ã§è¦‹ã¦ã„ãŸ
        * ç¸¦ã®é€£çµ: `pd.concat([train, test], axis=0, sort=False)`
    * describe()ã®å¼•æ•°
        * https://note.nkmk.me/python-pandas-describe/
        * percentiles: ä»»æ„ã®åˆ†ä½ç‚¹æŒ‡å®šå¯èƒ½
        * include: "all"ã‚’æŒ‡å®šã™ã‚‹ã¨ã™ã¹ã¦ã®å‹ãŒè¦‹ã‚Œã‚‹ã€‚"O"ã ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹
        * å…¬å¼: https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.describe.html  
        ![](img/README/20221001-17014006.png)
* éƒ¨åˆ†ä¸€è‡´
    * æ­£è¦è¡¨ç¾ãã®ã¾ã¾ä½¿ãˆã‚‹
        * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å¤§æ–‡å­—å°æ–‡å­—åŒºåˆ¥ã—ã¦ã‚‹ã£ã½ã„
        * df.str.contains('[a-z]+')
        * df.str.match()ã‚‚ã‚ã‚‹
        * æ©Ÿèƒ½è¦‹ã‚‹é™ã‚Šã‚¨ãƒ³ã‚¸ãƒ³ã®å®Ÿè£…ã¯.NETã¨åŒã˜ç³»çµ±ãã•ã„
            * æ›¸ã„ã¦ã‚ã£ãŸ https://learn.microsoft.com/ja-jp/dotnet/standard/base-types/details-of-regular-expression-behavior
* è¤‡æ•°ã®å€¤ï¼ˆãƒªã‚¹ãƒˆï¼‰ã§ã¾ã¨ã‚ã¦çµã‚‹
    * intå‹ã®åˆ—ã«å¯¾ã—ã¦ `df.str.match("^[0123]$")` ã¿ãŸã„ã«ã‚„ã‚‹ã¨ `Can only use .str accessor with string values!` ã¨æ€’ã‚‰ã‚Œã¦ã—ã¾ã†ã€‚ã€‚
        * ã“ã†ã„ã†ã¨ãã¯ `df.isin([0, 1, 2])` ã¿ãŸã„ã«ã‚„ã‚Œã°ãŠï½‹
* ã‚¨ãƒ©ãƒ¼  
    ```
    A value is trying to be set on a copy of a slice from a DataFrame.
    Try using .loc[row_indexer,col_indexer] = value instead
    ```
    * https://qiita.com/FukuharaYohei/items/b3aa7113d08858676910
    * ãƒã‚§ãƒ¼ãƒ³ã§ã¤ãªã’ã‚‹ã¨ç™ºç”Ÿã—ã‚„ã™ããªã‚‹æ¨¡æ§˜
    * å¯¾å‡¦æ³•ã¯ .loc[] ä½¿ã†
* pandasé‡ã„ã¨ã
    * numpyã§ã‚‚ä¼¼ãŸã‚ˆã†ãªã“ã¨ã¯ã§ãã‚‹æ¨¡æ§˜
        * https://qiita.com/nkay/items/6778bb6a6400ed985aa0

#### pandas ProfileReport()

* è§£èª¬
    * https://datatechlog.com/how-to-use-pandas-profiling/
* to_file()ã§htmlãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›å¯èƒ½ã€‚  
    * ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã„å ´åˆã€Chromeç³»ãƒ–ãƒ©ã‚¦ã‚¶ã ã¨ out of meomry ã‚’èµ·ã“ã™ã“ã¨ãŒã‚ã‚‹ã®ã§ã€ãã®å ´åˆã¯Firefoxã§è©¦ã—ã¦ã¿ã‚‹ã€‚
* ã‚ªãƒ—ã‚·ãƒ§ãƒ³
    * ç›¸é–¢ã‚’å‡ºã•ãªã„: 
        ```
        df.profile_report(
            title="Report without correlations",
            correlations=None,
        )
        ```
    * ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¸€è¦§
        * https://pandas-profiling.ydata.ai/docs/master/pages/advanced_usage/available_settings.html
    * correlationsã®æœ‰ç„¡ã€explorativeã®æœ‰ç„¡ã€ã„ãšã‚Œã‚‚å¤§ã—ã¦å®Ÿè¡Œæ™‚é–“ã‹ã‚ã‚‰ãªã„æ°—ãŒã™ã‚‹ã®ã¨ã€ç”Ÿæˆã•ã‚Œã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µã‚¤ã‚ºã¯å¯¾ã—ã¦é•ã„ãŒãªã„
        * ã‚µã‚¤ã‚ºã‚„é€Ÿåº¦ãŒæ°—ã«ãªã‚‹ã¨ãã¯ `minimal=True` ã‚’è¨­å®šã™ã‚‹ã®ãŒåŠ¹æœçš„ãªæ°—ãŒã™ã‚‹
    * Overview - Alertsã®æ„å‘³
        * High cardinality: ãƒ‡ãƒ¼ã‚¿ã®ç·æ•°ã«æ¯”ã—ã¦ãƒ‡ãƒ¼ã‚¿ã®ç¨®é¡ãŒå¤šã„
        * High correlation: ã‚ã‚‹åˆ—ã¨ã®ç›¸é–¢ãŒé«˜ã„
        * Missing: æ¬ æå€¤ãŒå¤šã„
        * Uniform
        * Unique
        * Zeros

#### seaborn

seaborn: Matplotlibã®ãƒ©ãƒƒãƒ‘ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

* countplot
* heatmap
* pairplot

#### one-hot-encoding

* pandas get_dummies()
    * drop_first = Trueã«ã™ã‚‹ã¨ã€ç”Ÿæˆã•ã‚Œã‚‹åˆ—ãŒä¸€ã¤æ¸›ã‚‹
    * ãƒãƒ«ãƒã‚³(multicollinearity)
        * https://clover.fcg.world/2016/03/28/2939/
* scikit-learn OneHotEncoder()

#### Xfeat

* ml_metrics ãŒ setuptools v58 ä»¥é™ã®ç’°å¢ƒã§å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€setuptoolsã‚’ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹
    ```
    $ pip install -U "setuptools<58"
    $ pip install xfeat
    ```

### æ¬¡å…ƒå‰Šæ¸›ã€æ¬¡å…ƒåœ§ç¸®

* ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›
    * æ©Ÿæ¢°å­¦ç¿’æ™‚ã€ãƒ‡ãƒ¼ã‚¿ã®åˆ†å¸ƒãŒç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ã¨ãã¯ã»ã¼å¿…é ˆ
        * Scikit-learn StandardScaler().fit_transform() â€»ä»–ã«ã‚‚ã„ãã¤ã‹ã®ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›æ–¹æ³•ã‚ã‚Š
        * https://helve-blog.com/posts/python/scikit-learn-feature-scaling/
    * é‡è¦
        * ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã¯train, testãƒ‡ãƒ¼ã‚¿ã‚’åˆ¥ã€…ã«ã‚„ã£ã¦ã¯ã„ã‘ãªã„
        * åˆ†æ•£ã€å¹³å‡ã€æœ€å¤§å€¤ã€æœ€å°å€¤ãªã©ã®æƒ…å ±ã¯ã€train, testãƒ‡ãƒ¼ã‚¿ã¨ã‚‚ã«åŒã˜çŠ¶æ…‹ã«ã™ã‚‹ã“ã¨ãŒé‡è¦
* scikit-learn PCA() fit_transform()
    * PCAã¯ã‚ã‚‰ã‹ã˜ã‚ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã™ã‚‹ã“ã¨ãŒå¤šã„
* scikit-learn TSNE() fit_transform()
* å¯è¦–åŒ–ã¯ã€äºŒæ¬¡å…ƒ or ä¸‰æ¬¡å…ƒ

### å­¦ç¿’ãƒ¢ãƒ‡ãƒ«

* å‹¾é…ãƒ–ãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚°æ±ºå®šæœ¨ç³»ï¼ˆGBDTï¼‰
    * å…¨èˆ¬åŸºç¤çŸ¥è­˜
        * https://qiita.com/kuroitu/items/57425380546f7b9ed91c
        * https://www.acceluniverse.com/blog/developers/2019/12/gbdt.html
        * https://www.youtube.com/watch?v=u0IIqeNZOXY
    * ç‰¹å¾´
        * https://doctorsato.com/python_gbdt/
            * æ¬ æå€¤ã‚’æ‰±ã†ã“ã¨ãŒã§ãã‚‹
            * ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’ã—ãªãã¨ã‚‚ç²¾åº¦ãŒã§ã‚„ã™ã„
            * ä¸è¦ãªç‰¹å¾´é‡ã‚’è¿½åŠ ã—ã¦ã‚‚ç²¾åº¦ãŒè½ã¡ã«ãã„
    * LightGBM
        * https://lightgbm.readthedocs.io/
        * XGBooståŒæ§˜ã€å‹¾é…ãƒ–ãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚°
        * äºˆæ¸¬ç²¾åº¦ã‚’ä¿ã£ãŸã¾ã¾å‡¦ç†æ™‚é–“ãŒé«˜é€Ÿã•ã‚Œã¦ã„ã‚‹ï¼ˆã—ã‹ã‚‚CPUã§ï¼‰
            * https://rightcode.co.jp/blog/information-technology/lightgbm-useful-for-kaggler
            * æ·±ã•å„ªå…ˆæ¢ç´¢ã£ã½ã„æ„Ÿã˜
            * LightGBMã¯ã€å°‚ç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«å…¥ã‚Œã‚‹ã“ã¨ã§å‡¦ç†é€Ÿåº¦ãŒä¸ŠãŒã‚‹ãã†
        * GPUä½¿ã†å ´åˆã¯aptã‚³ãƒãƒ³ãƒ‰ãƒ»ãƒ»ãƒ»ï¼Ÿï¼ˆpipã˜ã‚ƒãªã„ï¼Ÿï¼‰
            * å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« https://lightgbm.readthedocs.io/en/latest/GPU-Tutorial.html
        * ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
            * https://qiita.com/c60evaporator/items/351188110f328ff921b9
    * XGBoost
        * ä»¥ä¸‹ã¯é‡è¦
            * max_depath
        * early_stopping
            * æ—©ã‚ã«æ‰“ã¡åˆ‡ã‚‹ã“ã¨ã§éå­¦ç¿’ã‚’é˜²ã
    * Catboost
        * ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«å¤‰æ•°ã®æ‰±ã„ã«å¼·ã¿ã‚ã‚‹ãŒã€å®Ÿå‹™ã‚„ã‚³ãƒ³ãƒšã§ã¯ã‚ã¾ã‚Šä½¿ã‚ã‚Œã¦ã„ãªã„æ¨¡æ§˜ï¼Ÿ
        * GPUä½¿ã†ãªã‚‰LightGBMã‚ˆã‚Šç°¡å˜ã«å°å…¥ã§ãã‚‹ã£ã½ã„ï¼Ÿ
        * https://qiita.com/tanreinama/items/5e3eca5cf5e01169e5da

* ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
    * æ¯”è¼ƒ
        * https://www.tdi.co.jp/miso/tensorflow-keras-pytorch
        * ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å„ªå…ˆãªã‚‰ Tensorflow or PyTorch
        * å¯èª­æ€§å„ªå…ˆãªã‚‰ Keras
    * Tensorflow
        * https://zenn.dev/mimitako/articles/kaggle_first
    * Keras
        * ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã« CNTKã€Tensorflowã€Theano ãªã©ãŒä½¿ãˆã‚‹
    * PyTorch
        * ä¸»ã«è‡ªç„¶è¨€èªå‡¦ç†ç”¨é€”

* end-to-endã¨ã¯
    * https://speakerdeck.com/poya/mao-demowakarutabnet?slide=8

### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã¯åºç›¤ã‹ã‚‰è¡Œã†ã®ã¯ã‚ã¾ã‚Šé©åˆ‡ã§ãªã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚„ã‚‹å‰ã«ã€ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãªã©ã‚’è¡Œã†ã®ãŒç²¾åº¦æ”¹å–„ã«ã¤ãªãŒã‚Šã‚„ã™ã„ã€‚

ãƒ–ãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚°ç³»ã¯ã€ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¿æ•´ã«ã‚ˆã‚‹ç²¾åº¦å‘ä¸Šåˆ†ã¯å°ã•ã„ã¨è¨€ã‚ã‚ŒãŠã‚Šã€ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãŒæœ‰åŠ¹ã‚‰ã—ã„ã€‚

* ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆ
    * ä»¥ä¸‹ã¯ã»ã¼å¿…é ˆã£ã½ã„
        * max_depath
            * æ·±ã™ãã¦ã‚‚éå­¦ç¿’ã—ã¦ã—ã¾ã†ï¼ˆ7ãã‚‰ã„ãŒã‚ˆã„ã‚‰ã—ã„ï¼‰
            * scikit-learnã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯NONE = ç„¡é™
        * n_estimators
    * å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è©³ç´°: https://data-science.gr.jp/implementation/iml_sklearn_random_forest.html
* scikit-learn GridSearchCV()
    * param_grid: æ¢ç´¢å¯¾è±¡ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¾æ›¸ãƒ»ãƒªã‚¹ãƒˆ
    * scoring: è©•ä¾¡æŒ‡æ¨™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯accuracyã€‚å¿…è¦ã«å¿œã˜ã¦f1ãªã©é©åˆ‡ãªã‚‚ã®ã‚’é¸æŠï¼‰
    * CV: äº¤å·®æ¤œè¨¼ã®å›æ•°
    * best_estimator_ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã€æˆç¸¾ã®è‰¯ã‹ã£ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹
* ç‰¹å¾´é‡ã®å–æ¨é¸æŠ
    * https://qiita.com/Qwertyutr/items/9a02d2416bd8f3fae860
        > * çµ±è¨ˆçš„ãªå´é¢ã§ç‰¹å¾´é‡é¸æŠâ†’ SeletKBestï¼ˆãªã©ã€‚ä»–ã«ã‚‚ã‚ã‚Šã¾ã™ï¼‰
        > * æ©Ÿæ¢°å­¦ç¿’ã®å´é¢ã§ç‰¹å¾´é‡é¸æŠâ†’RFEï¼ˆãªã©ã€‚ã»ã‹ã«ã‚‚ã‚ã‚Šã¾ã™ï¼‰

è‡ªå‹•åŒ–

* ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¢ç´¢ï¼†ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°  https://qiita.com/Hironsan/items/30fe09c85da8a28ebd63


### ãã®ä»–

* Numpyä¾¿åˆ©é–¢æ•°
    * argsort(): å¼•æ•°ã§æŒ‡å®šã—ãŸé…åˆ—ã‚’ã‚½ãƒ¼ãƒˆã—ãŸéš›ã®ã€å…ƒã®é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½ç½®ã‚’è¿”ã™
    * NumPy.ndarrayã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µã®æ·»å­—ã§ã€NumPy.ndarrayå‹ã‚’æ¸¡ã›ã‚‹
    * NumPy.cut(), qcut()ã§ãƒ“ãƒ‹ãƒ³ã‚°å‡¦ç†ãŒå¯èƒ½  
    å‰å‡¦ç†ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¨ã‚ã‚‹ã‚‰ã—ã„
    * slice, loc, iloc, at, iat
        * https://note.nkmk.me/python-pandas-at-iat-loc-iloc/
    * æ¡ä»¶æŠ½å‡ºã®æ‰‹æ³•
        * https://note.nkmk.me/python-pandas-query/

* XGBoost
    * early_stopping_round
        * 1.6.0ä»¥é™ã¯ã€XGBClassfierãªã©ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§æŒ‡å®šã™ã‚‹ã‹set_paramsã§æŒ‡å®šã™ã‚‹

* ã‚°ãƒ©ãƒ•è¡¨ç¤º
    * Matplotlib
        * è»¸ã®æŒ‡æ•°è¡¨è¨˜ã®è¨­å®š
            * https://grapebanana.com/matplotlib-axis-11306/
            * http://www.yamamo10.jp/yamamoto/comp/Python/library/Matplotlib/basic/setting/index.php#INIT-SET
        * æ—¥æœ¬èªå¯¾å¿œ
            * https://gammasoft.jp/blog/matplotlib-japanese-fonts/
        * æ—¥æœ¬èªå¯¾å¿œ pandas ProfileReport()ã®å ´åˆ
            * import japanize_matplotlib ã¯ã†ã¾ãã„ã‹ãªã‹ã£ãŸ
            * pandas_profiling.mplstyle ã‚’ç›´ã«æ›¸ãæ›ãˆãŒå¿…è¦ã£ã½ã„
                * https://qiita.com/yubiquita/items/9c056e175ccb085eb137

    * ãƒ‘ã‚¿ãƒ¼ãƒ³: seabornä½¿ç”¨
        ```
        sns.histplot(x="BILL_AMT1", data=data, element='step')
        ```
    * ãƒ‘ã‚¿ãƒ¼ãƒ³
        ```
        df.hist() #å…¨ã‚«ãƒ©ãƒ å¯¾è±¡
        plt.show()
        ```
    * ãƒ‘ã‚¿ãƒ¼ãƒ³:
        ```
        data["ã‚«ãƒ©ãƒ å"].hist() #ç‰¹å®šã‚«ãƒ©ãƒ æŒ‡å®š
        plt.tight_layout() #ã‚°ãƒ©ãƒ•åŒå£«ãŒé‡ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹
        plt.show()
        ```
    * binsã€éšç´šæ•°
        * ã‚¹ã‚¿ãƒ¼ã‚¸ã‚§ã‚¹ã®å…¬å¼
            * https://tanuhack.com/seaborn-histgram/

* optuna
    * ä¹±æ•°ã‚·ãƒ¼ãƒ‰ã®å›ºå®šæ–¹æ³•
        * create_study()æ™‚ã«samplerã§seedã‚’å›ºå®šã™ã‚‹
        * ç›®çš„å¤‰æ•°ãŒä¸€æ¬¡å…ƒã®ã¨ãã¯TPESamplerã€äºŒæ¬¡å…ƒä»¥ä¸Šã®ã¨ãã¯NSGAIISampler

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

* ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ãƒ•ã‚©ãƒ«ãƒ€
    * `.\lib\site-packages` ã£ã½ã„ï¼Ÿ
* ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
    * `conda update --all`

* pipã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†å ´åˆ
    * å¸¸ã«ã“ã‚Œã‚’å®Ÿè¡Œã—ã¦ãŠãã®ãŒã‚ˆã„ã‚‰ã—ã„ï¼Ÿ `python -m pip install --upgrade pip setuptools`
    * ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
        * Linuxã ã¨ã‚·ã‚§ãƒ«ã§ã”ã«ã‚‡ã”ã«ã‚‡ã ãŒã€Windowsã®cmdã ã¨ã‚ã‚“ã©ãã•ã„
        * pip-reviewã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¥ã‚Œã‚‹ã¨æ¥½ã«ãªã‚Œã‚‹ã‚‰ã—ã„
            * https://zenn.dev/kittybbit/articles/bf8dd1db0e307d
* condaã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
    * `conda update -n base conda`
* pandas-profiling
    * ãªãœã‹ `conda install -c conda-forge pandas-profiling` ã ã¨1.4.1ç³»
    * `pip install pandas-profiling`
* XGBoost
    * https://xgboost.readthedocs.io/en/stable/install.html#python
    * 2022/09æ™‚ç‚¹ `conda install -c conda-forge py-xgboost` ã ã¨1.5.0ã«ãªã‚‹
        * `conda install -c conda-forge py-xgboost==1.6.2` ã ã¨ `conda-forge/win-64::py-xgboost-1.6.2-cpu_py39ha538f94_0` ã«ãªã‚‹  
        cpu onlyãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»ãƒ»ãƒ»ï¼Ÿ
            * ã“ã“è¦‹ã‚‹ã¨ linux-64 ã—ã‹ç„¡ã„ãƒ»ãƒ»ãƒ»  
            https://anaconda.org/conda-forge/py-xgboost-gpu  
            ![](img/README/20220925-10120197.png)
    * pipã ã¨GPUã‚µãƒãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå«ã¾ã‚Œã¦ã„ã‚‹æ¨¡æ§˜  
    ![](img/README/20220925-10143196.png)

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

* å®Ÿé¨“çµæœã®ç®¡ç†ã€æ•´ç†
    * Weights & Biases (wandb) ãŒã‚ˆã„ã‚‰ã—ã„ï¼Ÿ
        * å€‹äººãªã‚‰ç„¡æ–™

* ã‚³ãƒ¼ãƒ‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
    * GitHubï¼ˆæ™®æ®µä½¿ã£ã¦ã‚‹ã®ã§ï¼‰

## æ–‡å­—ã‚³ãƒ¼ãƒ‰é–¢é€£

### pyãƒ•ã‚¡ã‚¤ãƒ«ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰è¨­å®š

ã‚³ãƒ¼ãƒ‰å†…ã§æ—¥æœ¬èªæ–‡å­—åˆ—ãŒå‡ºã¦ãã‚‹ã®ã§ã‚ã‚Œã°ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’utf-8ã«ã™ã‚‹ã®ãŒãŸã¶ã‚“æ¥½ã€‚  
â€»BOMã‚ã‚Šã«ã—ã¦è‰¯ã„ã®ã‹ã¯ã‚ˆãã‚ã‹ã‚‰ãªã„

ã‚³ãƒ¼ãƒ‰ã®ä¸€è¡Œç›®ã§æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’æ˜è¨˜ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ã€‚ããã£ãŸã‚‰ä»¥ä¸‹ãŒã‚ˆãã¾ã¨ã¾ã£ã¦ã„ãŸã€‚  
https://qiita.com/KEINOS/items/6efc1147b917d7811b5b

## ãƒ­ã‚®ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

Pythonæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…ã§ãƒ­ã‚®ãƒ³ã‚°ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚‹ã€‚

https://docs.python.org/ja/3/howto/logging.html

https://docs.python.org/ja/3/howto/logging.html#configuring-logging

* ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã€ãƒãƒ³ãƒ‰ãƒ©
    * https://www.python.ambitious-engineer.com/archives/693
    * https://www.tohoho-web.com/python/logging.html


## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

py, ini, jsonã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå¤šãã†ã€‚
iniã¯ConfigParserã§å‡¦ç†ã§ãã‚‹ã€‚
* https://kodocode.net/python-begin-settings/


## ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç³»

* å¤‰æ•°åå–å¾—
    * locals, globals
* å‚™å¿˜
    * https://qiita.com/icoxfog417/items/bf04966d4e9706eb9e04
    * https://docs.python.org/ja/3/c-api/reflection.html
* ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç¢ºèª
    * https://qiita.com/pashango2/items/ef6c50dd0f91a63cf519


## CUDA

* CUDA Toolkitã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆå¾Œè¿°ï¼‰
* XGBoostã§ã®GPUä½¿ç”¨
    * condaã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹xgboostã¯1.5.0ã ãŒã€GPUéã‚µãƒãƒ¼ãƒˆ
        ```
        xgboost.core.XGBoostError: [09:12:50] c:\windows\temp\abs_557yfx631l\croots\recipe\xgboost-split_1659548953302\work\src\common\common.h:157: XGBoost version not compiled with GPU support.
        ```
    * GPUã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
        * Windowsã®anaconda 3ã ã¨ã€`benchmark_tree.py`ã¯å…¥ã£ã¦ãªã„ã£ã½ã„
        * XGBoostã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«ã¯å…¥ã£ã¦ã„ã‚‹ã®ã§ã“ã“ã‹ã‚‰è½ã¨ã›ã‚‹
        * "Anaconda Prompt (anaconda3)" ã‹ã‚‰ä»¥ä¸‹å®Ÿè¡Œã™ã‚Œã°ã‚ˆã„
            ```
            python tests/benchmark/benchmark_tree.py --tree_method=gpu_hist
            python tests/benchmark/benchmark_tree.py --tree_method=hist
            ```
    * XGBClassifier()ãŒGPUä½¿ã†è¨­å®šã ã¨é…ã„
        * VisualStudio2022ã§ã®ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œã§ã‚‚ã€Anaconda Promptã‹ã‚‰ã®å®Ÿè¡Œã§ã‚‚ã€å®Ÿè¡Œæ™‚é–“å¤‰ã‚ã‚‰ãªã„
            * `tree_method="gpu_hist"`ã ã¨12åˆ†ãã‚‰ã„ã‹ã‹ã‚‹å‡¦ç†ãŒã€`tree_method="hist"`ã ã¨2åˆ†ãã‚‰ã„ã«ãªã‚‹  
            ãƒ»ãƒ»ãƒ»ï¼Ÿï¼ŸğŸ¤”
        * benchmark_tree.py ã ã¨ã€GPUã¯CPUã®åŠåˆ†ä»¥ä¸‹ã®å‡¦ç†æ™‚é–“ã§é«˜é€Ÿ
        * åŸå› ä¸æ˜
            * ç›¸æ€§ï¼Ÿ https://teratail.com/questions/296378
        * è‡ªåˆ†ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹å ´åˆã®å‚™å¿˜
            * https://sekailab.com/wp/2018/06/29/installation-xgboost-to-winwdows10-gpu-support/
            * https://xgboost.readthedocs.io/en/latest/build.html#building-on-windows
* CUDA
    * https://developer.nvidia.com/cuda-gpus
        * å¯¾å¿œã—ã¦ã„ã‚‹GPUã¯ä»¥ä¸‹ç®‡æ‰€ã§ç¢ºèªå¯èƒ½  
        ![](img/README/20220924-20194027.png)
        * ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç’°å¢ƒç”¨ã ã¨ãƒã‚¤ãƒŠãƒªãŒã§ã‹ã„
            * CUDA 11ã§2.5GBã‚ã‚‹
        * networkç’°å¢ƒç”¨ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’ä½¿ã†ã®ãŒå‰
            * ä»¥ä¸‹ã¯ã€ŒDisable Usage Collectionã€ã§å•é¡Œãªã„æ°—ã¯ã™ã‚‹  
            ![](img/README/20220924-20411184.png)
    * å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã“ã¡ã‚‰  https://developer.nvidia.com/cuda-toolkit-archive
    * ã•ã‚‰ã«cuDNNã‚‚å¿…è¦
        * ã“ã®è¾ºè©³ã—ã„
            * https://shift101.hatenablog.com/entry/2022/02/27/200953
    * pytorchã¯CUDA Toolkit, cuDNNã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¯¾å¿œã—ãŸã‚‚ã®ã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹
        * https://qiita.com/motoyuki1963/items/a334c9488c2f55a867cf
## Anacondaã‚„ã‚ã¦Minicondaã«ã—ã¦ã¿ã‚‹

æ©Ÿæ¢°å­¦ç¿’å‰æï¼†Jupityer Notebookä½¿ãˆã‚‹çŠ¶æ…‹ã«ã—ã¦ãŠããŸã„ï¼†pipä½¿ã„ãŸã„ã“ã¨ãŒã‚ã‚‹ã€ã£ã¦ã¨ãcondaã¨pipã®æ··åœ¨ãŒå¾®å¦™ã£ã½ã„ã®ã§ã€ä»¥ä¸‹ã‚’å‚è€ƒã«Anacondaã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦Minicondaã‚’å…¥ã‚Œç›´ã™ã€‚

* å‚è€ƒ
    * https://qiita.com/kawada2017/items/626a80ed5bbfdc2576a5
* Miniconda ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ãƒˆ
    * https://docs.conda.io/en/latest/miniconda.html#windows-installers
    * Python 3.9ç”¨ã‚’é¸æŠ
    * ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ä»¥ä¸‹ã§ç¢ºèªã—ã¦ã„ã
        * `conda -V`
        * `python --version`
        * `conda info`
    * åˆæœŸè¨­å®šç›´å¾Œã®çŠ¶æ…‹ã§ä»¥ä¸‹å®Ÿè¡Œã—ã€çµæœã‚’ã¨ã‚Šã‚ãˆãšGitHubï¼ˆãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªï¼‰ã«æ”¾ã‚Šè¾¼ã‚“ã§ãŠã
        * `pip freeze > requirements.txt`
        * `conda list -e > conda_requirements.txt`
        * requirements.txtã¯ä»–ç«¯æœ«ã§åŒã˜ç’°å¢ƒã‚’ç”¨æ„ã—ãŸã„ã¨ãã«ä½¿ãˆã‚‹ï¼ˆã‚ã¾ã‚Šã†ã¾ãã„ã‹ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã¿ãŸã„ã ãŒï¼‰

æ¬¡ã«ä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹ã€‚  
Pythonã®ä»®æƒ³ç’°å¢ƒæ§‹ç¯‰ç”¨ã®æ©Ÿèƒ½ã¯è¤‡æ•°ã‚ã‚‹ã¿ãŸã„ã ãŒã€condaã§æ§‹ç¯‰ã™ã‚‹ã€‚

* å„æ©Ÿèƒ½ã®æ¯”è¼ƒ
    * https://zenn.dev/mook_jp/articles/1d915a0aef83a7  
![](img/README/20220925-16003149.png)
    * https://qiita.com/KRiver1/items/c1788e616b77a9bad4dd#pyenv-virtualenv%E3%82%92%E3%82%84%E3%82%81pipenv%E3%82%92%E4%BD%BF%E3%81%86

æ§‹ç¯‰æ‰‹é †ã¯ä»¥ä¸‹ã‚’å‚è€ƒã«ã™ã‚‹ã€‚

* https://zenn.dev/unemployed/articles/cc111706c3167c

* å®Ÿæ–½æ‰‹é †
    1. `Anaconda Prompt (miniconda3)` ã‚’ç«‹ã¡ä¸Šã’ã‚‹
    1. `conda create -n DataScienceCompe2022_eLearning python` ã§ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆ
        * condaã‚’updateã—ãŸã»ã†ãŒã‚ˆã„ã¿ãŸã„ãªã“ã¨ã‚’è¨€ã‚ã‚Œã‚‹ãŒç„¡è¦–ã™ã‚‹  
        * C:\Users\ãƒ¦ãƒ¼ã‚¶å\.conda\envs\DataScienceCompe2022_eLearning ã®ã‚ˆã†ã«ãƒ•ã‚©ãƒ«ãƒ€ãŒä½œã‚‰ã‚Œã‚‹
        * ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒãšã‚‰ãšã‚‰è¡¨ç¤ºã•ã‚Œã‚‹ãŒã€baseå´ã®è©±ãªã®ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„
            * å®Ÿè¡Œå‰å¾Œã§baseå´ã® `conda list` ã‚’æ¯”è¼ƒã—ãŸãŒç‰¹ã«å·®åˆ†ãªã‹ã£ãŸã®ã§ã€ä»®æƒ³ç’°å¢ƒå´ã®è©±ã®ã‚ˆã†ã ã€‚
    1. ç’°å¢ƒä½œæˆãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€`conda info -e` ã§ä½œã£ãŸä»®æƒ³ç’°å¢ƒä¸€è¦§ãŒè¦‹ã‚Œã‚‹
    1. `conda activate ç’°å¢ƒå` ã§ä»®æƒ³ç’°å¢ƒã«å…¥ã‚‹ï¼ˆsource activate ç’°å¢ƒåã¯å¤ã„æ›¸ãæ–¹ã£ã½ã„ï¼‰
    1. `pip freeze` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ã‚’ç¢ºèª
        * ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å†…å®¹ãŒã‚ã¡ã‚ƒã‚·ãƒ³ãƒ—ãƒ«
    1. `conda deactivate` ã§ä»®æƒ³ç’°å¢ƒã‚’æŠœã‘ã‚‹
    1. `conda remove -n ç’°å¢ƒå --all` ã§ç’°å¢ƒã‚’å‰Šé™¤ã§ãã‚‹

* è¿½åŠ ã§å…¥ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
    1. `Anaconda Prompt (miniconda3)` ã‚’ç«‹ã¡ä¸Šã’ã‚‹
    1. `pip install jupyter notebook`
        * ãƒãƒƒãƒˆè¦‹ã‚‹ã¨ã€`conda install notebook ipykernel` ã®æ‰‹é †ã‚‚å¿…è¦ãªã‚ˆã†ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ãŒã€ç‰¹ã«ã‚„ã‚‰ãªãã¦ã‚‚ jupyter notebook ã‹ã‚‰pythonã¯å‹•ã„ã¦ã„ã‚‹æ¨¡æ§˜ï¼ˆéå»ã«Anacondaå…¥ã‚Œã¦ã„ãŸã‹ã‚‰ã‹ã‚‚ã—ã‚Œãªã„ï¼‰
        * jupyterã®èµ·å‹•ã¯ `jupyter notebook` ã®ã‚ˆã†ã«ã™ã‚‹ã¨ãƒ–ãƒ©ã‚¦ã‚¶ãŒç«‹ã¡ä¸ŠãŒã‚‹ã¨ã“ã‚ã¾ã§è‡ªå‹•ã§å‹•ã
    1. `pip install numpy pandas pandas-profiling seaborn sklearn xgboost` ã‚’å®Ÿè¡Œ
    1. `pip install -U imbalanced-learn`
        * SMOTE
    1. `pip install -U plotly`
    1. `pip install -U lightgbm`

* Visual Studio Community 2022ã§ã®è¨­å®š
    * ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ã§ `Pythonç’°å¢ƒ` -> `ç’°å¢ƒã‚’è¿½åŠ `  
    ![](img/README/20220925-16254675.png)
    * `ç’°å¢ƒã‚’è¿½åŠ ` -> `æ—¢å­˜ç’°å¢ƒ` ã§ï¼ˆbaseã§ãªã„ï¼‰ä»®æƒ³ç’°å¢ƒã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¨­å®šã™ã‚‹ã¨å‹æ‰‹ã«VSã«èªè­˜ã•ã‚Œã‚‹  
    ![](img/README/20220925-16265625.png)

## ipynbã®ãƒ“ãƒ¥ãƒ¼ã‚¢

* Visual Studio Community 2022 + æ‹¡å¼µæ©Ÿèƒ½Notebook Editor
    * https://marketplace.visualstudio.com/items?itemName=MLNET.notebook
    * ã¾ã ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆãªã›ã„ãªã®ã‹ã‚ã‹ã‚‰ãªã„ãŒå‹•ããŒé…ãã¦å®Ÿç”¨ã™ã‚‹æ°—ã«ãªã‚Œãªã„
* Visual Studio Code
    * ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¨ãã¨åŒæ§˜ã®æ„Ÿè¦šã§ä½¿ãˆã‚‹ãŒã€ãƒ€ãƒ¼ã‚¯ç³»ã®ãƒ†ãƒ¼ãƒã ã¨ã‚°ãƒ©ãƒ•ãŒè¦‹ã¥ã‚‰ã„ãƒ»ãƒ»ãƒ»
        * ipynbã®ã¨ãã ã‘ãƒ©ã‚¤ãƒˆç³»ã§ã€ãŒã£ã¤ã‚Šã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã¨ãã¯ãƒ€ãƒ¼ã‚¯ç³»ãŒã„ã„
        * ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§è¨­å®šå¤‰ãˆã‚Œã°ã„ã„ã®ã‹ï¼Ÿ
            * https://prius.cc/itya/20181218_vscode-workspace
    * *.pyã§æ›¸ã„ã¦ã€ãã®å¾Œã«ipynbã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹
        * https://qiita.com/komiya_____/items/547ae8b5a9b031f18b59

## Visual Studio Community 2022ãƒã‚¦ãƒã‚¦

* ã‚°ãƒ©ãƒ•åŒ–ã€å¯è¦–åŒ–
    * é©å½“ãªã¨ã“ã‚ã§ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã§æ­¢ã‚ãŸçŠ¶æ…‹ã§ã‚¤ãƒŸãƒ‡ã‚£ã‚¨ã‚¤ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ `sns.histplot(x="BILL_AMT1", data=data, element='step')` ã®ã‚ˆã†ã«å®Ÿè¡Œã™ã‚‹ã¨ãã®å ´ã§ã‚°ãƒ©ãƒ•è¦‹ã‚Œã‚‹  
    ![](img/README/20220926-22404058.png)
    * ã‚°ãƒ©ãƒ•ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¤‡æ•°æšå‡ºã—ãŸã„ã¨ãã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ä¸€åº¦plt.figure()ã‚’å‘¼ã³å‡ºã›ã°ã¨ã‚Šã‚ãˆãšã§ãã‚‹ï¼ˆã‚‚ã£ã¨ã‚«ãƒƒã‚³ã„ã„ã‚„ã‚Šæ–¹ãŒã‚ã‚Šãã†ãªæ°—ã¯ã™ã‚‹ï¼‰
        ```
        plt.figure()
        sns.histplot(x="BILL_AMT1", data=data, element='step')
        ```

## Visual Studio Codeãƒã‚¦ãƒã‚¦

* ã‚°ãƒ©ãƒ•åŒ–ã€å¯è¦–åŒ–
    * é©å½“ãªã¨ã“ã‚ã§ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆç½®ããƒ‘ã‚¿ãƒ¼ãƒ³
        * ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§`sns.histplot(x="BILL_AMT1", data=data, element='step')` ã®ã‚ˆã†ã«å®Ÿè¡Œã™ã‚‹ã¨ãã®å ´ã§ã‚°ãƒ©ãƒ•è¦‹ã‚Œã‚‹
* æ‹¡å¼µæ©Ÿèƒ½
    * indent-rainbow
        * ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆéšå±¤ã®å¯è¦–åŒ–
        * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚ˆã‚Šã¯è¦‹ã‚„ã™ããªã‚‹ã®ã§ç„¡ã„ã‚ˆã‚Šã¯ã‚ã£ãŸã»ã†ãŒè‰¯ã„
    * Pylance
        * https://forest.watch.impress.co.jp/docs/news/1324425.html
        * å‹ãƒã‚§ãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹
            * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ç„¡åŠ¹
            * VS Codeã®è¨­å®šç”»é¢ã‹ã‚‰ `python.analysis.typeCheckingMode` ã‚’basicã‚‚ã—ãã¯strictã«è¨­å®š
    * IntelliCode
        * AIæ”¯æ´ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹
        * Python, Java, TypeScript, JavaScriptå¯¾å¿œ
    * Python Indent
        * ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆæŒ¿å…¥
    * autopep8: ä¿ç•™
        * ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿
    * flake8: ä¿ç•™
        * lint
    * todo tree
        * todoãƒªã‚¹ãƒˆ
        * ã‚³ãƒ¼ãƒ‰ä¸Šã§ `#TODO foobar` ã¨å…¥ã‚Œã‚‹ã¨TODOsãƒ‘ãƒãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹
    * Zenkaku: ä¿ç•™
        * å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹è¡¨ç¤º
    * autoDocstring - Python Docstring Generator
        * docstring
        * dostring formatã¯ã¨ã‚Šã‚ãˆãšgoogleã‚¹ã‚¿ã‚¤ãƒ«ã§
        * ctrl + shift + 2 ã§è‡ªå‹•æŒ¿å…¥ã•ã‚Œã‚‹
    * python-snippets
        * https://marketplace.visualstudio.com/items?itemName=frhtylcn.pythonsnippets
        * ã¨ã‚Šã‚ãˆãšã‚¹ãƒ‹ãƒšãƒƒãƒˆãªã„ã¨ã‚ã‚“ã©ãã•ã„ã®ã§é©å½“ãªã‚‚ã®ã‚’å…¥ã‚Œã¦ã¿ã‚‹
* è¨­å®š
    * ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã§ä»¥ä¸‹è¨­å®š
        * files.insertFinalNewline
            * ä¿å­˜æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã«æ”¹è¡Œã‚’å…¥ã‚Œã‚‹
        * editor.renderControlCharacters
            * åˆ¶å¾¡æ–‡å­—è¡¨ç¤º
        * Python: Language Server
            * ã¨ã‚Šã‚ãˆãš Pylance ã‚’æŒ‡å®šã—ã¦ã¿ã‚‹
        * Pylance / Python â€º Analysis: Auto Import Completions
            * æ„å›³ã—ãªã„importæ–‡ãŒæŒ¿å…¥ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã€ã“ã‚Œã®ã›ã„ã‹ã‚‚
            * OFFã«ã—ãŸã„æ°—ãŒã™ã‚‹
* ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ç³»
    * é–¢æ•°æƒ…å ±ç­‰: `ctrl + i` or `ctrl + k -> ctrl + i`
    * `ctrl + k -> ctrl + i` ã®æ–¹ãŒã‚·ã‚°ãƒ‹ãƒãƒ£æƒ…å ±ãªã©ãŒè¦‹ã‚„ã™ã„ã—ãŸã¶ã‚“å…¨éƒ¨è¦‹ã‚Œã¦ã‚‹
    * `ctrl + space` ã¯æœ¬å®¶Visual Studioã¨åŒã˜

## wandb

* ã¯ã˜ã‚ã‹ãŸ
    * https://qiita.com/daikiclimate/items/96bd784170582651651b
    * https://www.nogawanogawa.com/entry/wandb
    * ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œã£ãŸã‚‰ã€ personal ã®è¨­å®šã«ãªã£ã¦ã„ã‚‹ã“ã¨ã¯ã¨ã‚Šã‚ãˆãšç¢ºèªã—ã¦ãŠã
* ã¨ã‚Šã‚ãˆãš "sandbox" ã£ã¦åå‰ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåä½œã£ã¦ã¿ã‚‹
    * Quick Setup for "sandbox" ã£ã¦ãƒšãƒ¼ã‚¸ãŒã§ãã¦ã€ãã“ã§PyTorch, Keras, XGBoost, Scikit-learnãªã©ã®ã‚µãƒ³ãƒ—ãƒ«ãŒã™ãã«è¦‹ã‚Œã‚‹ï¼
    * ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«
        * https://docs.wandb.ai/quickstart
            * pip install wandb
            * wandb login
                * ã“ã“ã§APIã‚­ãƒ¼ã‚’ç´ã¥ã‘ã‚‹ï¼ˆåŒã˜PCãªã‚‰åˆå›ã ã‘ã§è‰¯ã„ã£ã½ã„ï¼Ÿï¼‰
                * ã©ã“ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã‹ã¯ã‚ˆãã‚ã‹ã‚‰ãªã„
                    * ã¾ãšãã†ãªã¨ãã‚ˆã†ã®å‚™å¿˜
                        * ç’°å¢ƒå¤‰æ•°ã«ç™»éŒ²ã™ã‚‹ã‚„ã‚Šæ–¹ãŒæ¥½ãã†
                        * https://itnews.org/news_contents/secrets-api-management
                        * https://shikaku-sh.hatenablog.com/entry/securing-an-api-key
* lightGBMã®ã‚µãƒ³ãƒ—ãƒ«
    * https://colab.research.google.com/drive/1R6_vcVM90Ephyu0HDFlPAZa0SgEC_3bE#scrollTo=wmBJfKH0Fzwn
    * https://www.guruguru.science/competitions/16/discussions/2b8ed6e9-d754-4ae5-a246-addb11558d9b/

## ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ

* https://upura.hatenablog.com/entry/2018/12/28/225234
    * https://github.com/upura/ml-competition-template-titanic
* cookiecutter
    * https://www.st-hakky-blog.com/entry/2017/03/24/140738
    * https://qiita.com/Hironsan/items/4479bdb13458249347a1
    * https://wonderwall.hatenablog.com/entry/2017/09/07/211000
* ä»®æ¡ˆ
    * /
        * data
            * input
                * train.csv
                * test.csv
                * featured.pkl ... train/testã‚’ç¸¦ã«é€£çµã—ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’å®Ÿæ–½ã—ãŸã‚ã¨ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
            * description.csv ... å„é …ç›®ã®èª¬æ˜æ›¸
        * notebooks
            * eda.py ... markdownæ··ã–ã‚Šã®pythonãƒ•ã‚¡ã‚¤ãƒ«
            * profiling_report
                * foo.html
        * tests : https://qiita.com/hoto17296/items/fa0166728177e676cd36
        * wandb ... ã“ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚‚GitHubç®¡ç†å¯¾è±¡ã«ã™ã‚‹
            * model_rf.pkl
            * model_xgb.pkl
            * submit_rf.csv
            * submit_xgb.csv
            * trace_yyyymmddhhmmss.log
            * requirments.txt
            * ...
        * src
            * common
                * utils.py
            * 00_init.py ... ä»®æŠ¼ã•ãˆï¼ˆæƒ³å®šç”¨é€”ã¯ä»Šã®ã¨ã“ã‚ãªã—ï¼‰
            * 10_eda.py ... edaé–¢é€£ / profiling_reportã‚„ã£ãŸã‚Šãªã©ã‚’æƒ³å®š
            * 20_build_features.py ... ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ»ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’è¡Œã„ã€MAXã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹
            * 50_run_rf.py ... å¿…è¦ãªç‰¹å¾´é‡ã‚’å–æ¨é¸æŠã—å­¦ç¿’ã€äºˆæ¸¬(valid)ã€submitã€submitå¾Œã‚¹ã‚³ã‚¢å–å¾—
            * 50_run_xgb.py ... åŒä¸Š
        * LICENSE
        * README.md

        * ...

## ã‚³ãƒ¼ãƒ‰è¡Œæ•°ã‚«ã‚¦ãƒ³ãƒˆ / ã‚¹ãƒ†ãƒƒãƒ—ã‚«ã‚¦ãƒ³ãƒˆ

* `(dir -include *.py -recurse | select-string .).Count`

## ã‚ã¨ã§è©³ç´°èª­ã‚“ã§ãŠããŸã„ãƒ¡ãƒ¢

* Tips
    * https://naotaka1128.hatenadiary.jp/entry/kaggle-compe-tips
* Kaggleã§æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã®å‚™å¿˜éŒ²
    * https://qiita.com/pocokhc/items/add4948aa0ff858218f8
    * https://qiita.com/pocokhc/items/0b6b6534ab984bb87ac4
    * https://qiita.com/pocokhc/items/56273f40f57679f25341
* æ©Ÿæ¢°å­¦ç¿’å¸³
    * https://chokkan.github.io/mlnote/index.html
* Chainer ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
    * https://tutorials.chainer.org/ja/tutorial.html
* ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°å…¥é–€
    * https://qiita.com/AeyeScan/items/301b724d11433eebc205

## æ›¸ç±

* æ°—ã«ãªã£ã¦ã„ã‚‹
    * Oâ€™Reilly: ã‚¼ãƒ­ã‹ã‚‰ä½œã‚‹Deep Learning
    * [ç¬¬3ç‰ˆ]Pythonæ©Ÿæ¢°å­¦ç¿’ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° é”äººãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆã«ã‚ˆã‚‹ç†è«–ã¨å®Ÿè·µ
    * Kaggleã§å‹ã¤ãƒ‡ãƒ¼ã‚¿åˆ†æã®æŠ€è¡“
        * https://github.com/ghmagazine/kagglebook

* èª­äº†
    * Kaggleã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ç¬¬ï¼–ç‰ˆ
        * Titanicã§kaggleã¸ã®åˆSubmitã€ã•ã‚‰ã«å­¦ç¿’ã®åŸºæœ¬çš„ãªæµã‚ŒãŒå‚è€ƒã«ãªã£ãŸ
        * https://www.currypurin.com/tutorial_ver6_support
    * kaggleã§ä¸Šä½ã«å…¥ã‚‹ãŸã‚ã®æ¢ç´¢çš„ãƒ‡ãƒ¼ã‚¿è§£æå…¥é–€
        * ãƒ‡ãƒ¼ã‚¿ã®ç¨®é¡ã”ã¨ã®è€ƒæ…®ç‚¹ã€ç®±ã²ã’å›³ã€ãƒã‚¤ã‚ªãƒªãƒ³å›³ã®ã‚µãƒ³ãƒ—ãƒ«ãŒã‚ˆã‹ã£ãŸ

* ã‚ã¨ã§èª­ã¿ç›´ã™
    * Pythonã§å‹•ã‹ã—ã¦å­¦ã¶ï¼ ã‚ãŸã‚‰ã—ã„æ©Ÿæ¢°å­¦ç¿’ã®æ•™ç§‘æ›¸ ç¬¬2ç‰ˆ

## ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é¡

### UserWarning: X has feature names, but XXXXXXXX was fitted without feature names

Fit()æ™‚ã¨å‹ãŒé•ã†è­¦å‘Šã€‚å‹ã‚’ã‚ã‚ã›ã‚Œã°è‰¯ã„ã€‚

https://qiita.com/ex-soccer-coach/items/5d05cf687f2a20866afa
